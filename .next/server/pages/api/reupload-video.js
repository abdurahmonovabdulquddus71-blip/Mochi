"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/reupload-video";
exports.ids = ["pages/api/reupload-video"];
exports.modules = {

/***/ "@aws-sdk/client-s3":
/*!*************************************!*\
  !*** external "@aws-sdk/client-s3" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Freupload-video&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Freupload-video.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Freupload-video&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Freupload-video.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_reupload_video_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/reupload-video.js */ \"(api)/./pages/api/reupload-video.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_reupload_video_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_reupload_video_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/reupload-video\",\n        pathname: \"/api/reupload-video\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_reupload_video_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnJldXBsb2FkLXZpZGVvJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZyZXVwbG9hZC12aWRlby5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUMwRDtBQUMxRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMseURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHlEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3ByaXZhdGUvPzdmNjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9yZXVwbG9hZC12aWRlby5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3JldXBsb2FkLXZpZGVvXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcmV1cGxvYWQtdmlkZW9cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Freupload-video&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Freupload-video.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/reupload-video.js":
/*!*************************************!*\
  !*** ./pages/api/reupload-video.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/client-s3 */ \"@aws-sdk/client-s3\");\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! https */ \"https\");\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(https__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! http */ \"http\");\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(http__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! url */ \"url\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst config = {\n    api: {\n        bodyParser: true\n    }\n};\n// S3Client yaratish\nconst s3Client = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.S3Client({\n    region: \"auto\",\n    endpoint: `https://${process.env.R2_ACCOUNT_ID}.r2.cloudflarestorage.com`,\n    credentials: {\n        accessKeyId: process.env.R2_ACCESS_KEY,\n        secretAccessKey: process.env.R2_SECRET_KEY\n    }\n});\n// Fayl nomini tozalash funksiyasi\nconst sanitizeFileName = (str)=>{\n    if (!str) return \"unknown\";\n    return String(str).replace(/[^a-zA-Z0-9_-]/g, \"\");\n};\n// URL dan faylni yuklab olish funksiyasi\nconst downloadFileFromUrl = (url)=>{\n    return new Promise((resolve, reject)=>{\n        const protocol = url.startsWith(\"https\") ? (https__WEBPACK_IMPORTED_MODULE_1___default()) : (http__WEBPACK_IMPORTED_MODULE_2___default());\n        const request = protocol.get(url, (response)=>{\n            // Redirect bo'lsa, yangi URL ga o'tish\n            if (response.statusCode === 302 || response.statusCode === 301) {\n                downloadFileFromUrl(response.headers.location).then(resolve).catch(reject);\n                return;\n            }\n            if (response.statusCode !== 200) {\n                reject(new Error(`HTTP Status: ${response.statusCode}`));\n                return;\n            }\n            const chunks = [];\n            let totalSize = 0;\n            response.on(\"data\", (chunk)=>{\n                chunks.push(chunk);\n                totalSize += chunk.length;\n            });\n            response.on(\"end\", ()=>{\n                const buffer = Buffer.concat(chunks);\n                console.log(`âœ… Fayl yuklab olindi: ${totalSize} bytes`);\n                resolve(buffer);\n            });\n            response.on(\"error\", reject);\n        });\n        request.on(\"error\", reject);\n        // Timeout qo'shish (5 daqiqa)\n        request.setTimeout(300000, ()=>{\n            request.destroy();\n            reject(new Error(\"Download timeout (5 daqiqa)\"));\n        });\n    });\n};\n// Content-Type ni URL dan aniqlash\nconst getContentTypeFromUrl = (url)=>{\n    try {\n        const urlObj = new url__WEBPACK_IMPORTED_MODULE_3__.URL(url);\n        const ext = urlObj.pathname.split(\".\").pop().toLowerCase();\n        const contentTypes = {\n            \"mp4\": \"video/mp4\",\n            \"webm\": \"video/webm\",\n            \"avi\": \"video/x-msvideo\",\n            \"mov\": \"video/quicktime\",\n            \"mkv\": \"video/x-matroska\",\n            \"flv\": \"video/x-flv\"\n        };\n        return contentTypes[ext] || \"video/mp4\";\n    } catch (e) {\n        return \"video/mp4\";\n    }\n};\nasync function handler(req, res) {\n    // Faqat POST so'rovlarni qabul qilish\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Faqat POST so'rovlar qabul qilinadi\"\n        });\n    }\n    try {\n        // 1ï¸âƒ£ Muhit o'zgaruvchilarini tekshirish\n        if (!process.env.R2_ACCOUNT_ID || !process.env.R2_ACCESS_KEY || !process.env.R2_SECRET_KEY || !process.env.R2_BUCKET_NAME) {\n            throw new Error(\"R2 sozlamalari to'liq emas (.env faylni tekshiring)\");\n        }\n        // 2ï¸âƒ£ Request body dan ma'lumotlarni olish\n        const { video_url, episode_number, anime_id } = req.body;\n        if (!video_url) {\n            return res.status(400).json({\n                error: \"video_url majburiy\"\n            });\n        }\n        if (!episode_number || !anime_id) {\n            return res.status(400).json({\n                error: \"episode_number va anime_id majburiy\"\n            });\n        }\n        console.log(`ðŸ“¥ Video yuklab olinmoqda: ${video_url}`);\n        // 3ï¸âƒ£ Video faylni URL dan yuklab olish\n        const fileBuffer = await downloadFileFromUrl(video_url);\n        if (!fileBuffer || fileBuffer.length === 0) {\n            throw new Error(\"Video yuklab olinmadi yoki fayl bo'sh\");\n        }\n        // 4ï¸âƒ£ Yangi fayl nomini yaratish\n        const fileExt = video_url.split(\".\").pop().split(\"?\")[0] || \"mp4\";\n        const fileName = `anime_${sanitizeFileName(anime_id)}_episode_${sanitizeFileName(episode_number)}_${Date.now()}.${fileExt}`;\n        console.log(`ðŸ“¤ R2 ga yuklash boshlanmoqda: ${fileName}`);\n        // 5ï¸âƒ£ R2 ga upload qilish\n        await s3Client.send(new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.PutObjectCommand({\n            Bucket: process.env.R2_BUCKET_NAME,\n            Key: fileName,\n            Body: fileBuffer,\n            ContentType: getContentTypeFromUrl(video_url)\n        }));\n        console.log(`âœ… Qayta yuklash muvaffaqiyatli: ${fileName}`);\n        // 6ï¸âƒ£ Public URL yaratish\n        const downloadUrl = process.env.R2_PUBLIC_DOMAIN ? `https://${process.env.R2_PUBLIC_DOMAIN}/${fileName}` : `https://pub-${process.env.R2_ACCOUNT_ID}.r2.dev/${fileName}`;\n        // 7ï¸âƒ£ Natijani qaytarish\n        return res.status(200).json({\n            success: true,\n            fileName,\n            downloadUrl,\n            fileSize: fileBuffer.length,\n            uploadedAt: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error(\"âŒ Qayta yuklash xatosi:\", error);\n        return res.status(500).json({\n            success: false,\n            error: error.message || \"Qayta yuklash xatosi\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcmV1cGxvYWQtdmlkZW8uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFnRTtBQUN0QztBQUNGO0FBQ0U7QUFFbkIsTUFBTUssU0FBUztJQUNwQkMsS0FBSztRQUNIQyxZQUFZO0lBQ2Q7QUFDRixFQUFFO0FBRUYsb0JBQW9CO0FBQ3BCLE1BQU1DLFdBQVcsSUFBSVIsd0RBQVFBLENBQUM7SUFDNUJTLFFBQVE7SUFDUkMsVUFBVSxDQUFDLFFBQVEsRUFBRUMsUUFBUUMsR0FBRyxDQUFDQyxhQUFhLENBQUMseUJBQXlCLENBQUM7SUFDekVDLGFBQWE7UUFDWEMsYUFBYUosUUFBUUMsR0FBRyxDQUFDSSxhQUFhO1FBQ3RDQyxpQkFBaUJOLFFBQVFDLEdBQUcsQ0FBQ00sYUFBYTtJQUM1QztBQUNGO0FBRUEsa0NBQWtDO0FBQ2xDLE1BQU1DLG1CQUFtQixDQUFDQztJQUN4QixJQUFJLENBQUNBLEtBQUssT0FBTztJQUNqQixPQUFPQyxPQUFPRCxLQUFLRSxPQUFPLENBQUMsbUJBQW1CO0FBQ2hEO0FBRUEseUNBQXlDO0FBQ3pDLE1BQU1DLHNCQUFzQixDQUFDQztJQUMzQixPQUFPLElBQUlDLFFBQVEsQ0FBQ0MsU0FBU0M7UUFDM0IsTUFBTUMsV0FBV0osSUFBSUssVUFBVSxDQUFDLFdBQVczQiw4Q0FBS0EsR0FBR0MsNkNBQUlBO1FBRXZELE1BQU0yQixVQUFVRixTQUFTRyxHQUFHLENBQUNQLEtBQUssQ0FBQ1E7WUFDakMsdUNBQXVDO1lBQ3ZDLElBQUlBLFNBQVNDLFVBQVUsS0FBSyxPQUFPRCxTQUFTQyxVQUFVLEtBQUssS0FBSztnQkFDOURWLG9CQUFvQlMsU0FBU0UsT0FBTyxDQUFDQyxRQUFRLEVBQUVDLElBQUksQ0FBQ1YsU0FBU1csS0FBSyxDQUFDVjtnQkFDbkU7WUFDRjtZQUVBLElBQUlLLFNBQVNDLFVBQVUsS0FBSyxLQUFLO2dCQUMvQk4sT0FBTyxJQUFJVyxNQUFNLENBQUMsYUFBYSxFQUFFTixTQUFTQyxVQUFVLENBQUMsQ0FBQztnQkFDdEQ7WUFDRjtZQUVBLE1BQU1NLFNBQVMsRUFBRTtZQUNqQixJQUFJQyxZQUFZO1lBRWhCUixTQUFTUyxFQUFFLENBQUMsUUFBUSxDQUFDQztnQkFDbkJILE9BQU9JLElBQUksQ0FBQ0Q7Z0JBQ1pGLGFBQWFFLE1BQU1FLE1BQU07WUFDM0I7WUFFQVosU0FBU1MsRUFBRSxDQUFDLE9BQU87Z0JBQ2pCLE1BQU1JLFNBQVNDLE9BQU9DLE1BQU0sQ0FBQ1I7Z0JBQzdCUyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxzQkFBc0IsRUFBRVQsVUFBVSxNQUFNLENBQUM7Z0JBQ3REZCxRQUFRbUI7WUFDVjtZQUVBYixTQUFTUyxFQUFFLENBQUMsU0FBU2Q7UUFDdkI7UUFFQUcsUUFBUVcsRUFBRSxDQUFDLFNBQVNkO1FBRXBCLDhCQUE4QjtRQUM5QkcsUUFBUW9CLFVBQVUsQ0FBQyxRQUFRO1lBQ3pCcEIsUUFBUXFCLE9BQU87WUFDZnhCLE9BQU8sSUFBSVcsTUFBTTtRQUNuQjtJQUNGO0FBQ0Y7QUFFQSxtQ0FBbUM7QUFDbkMsTUFBTWMsd0JBQXdCLENBQUM1QjtJQUM3QixJQUFJO1FBQ0YsTUFBTTZCLFNBQVMsSUFBSWpELG9DQUFHQSxDQUFDb0I7UUFDdkIsTUFBTThCLE1BQU1ELE9BQU9FLFFBQVEsQ0FBQ0MsS0FBSyxDQUFDLEtBQUtDLEdBQUcsR0FBR0MsV0FBVztRQUV4RCxNQUFNQyxlQUFlO1lBQ25CLE9BQU87WUFDUCxRQUFRO1lBQ1IsT0FBTztZQUNQLE9BQU87WUFDUCxPQUFPO1lBQ1AsT0FBTztRQUNUO1FBRUEsT0FBT0EsWUFBWSxDQUFDTCxJQUFJLElBQUk7SUFDOUIsRUFBRSxPQUFPTSxHQUFHO1FBQ1YsT0FBTztJQUNUO0FBQ0Y7QUFFZSxlQUFlQyxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUMsc0NBQXNDO0lBQ3RDLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFzQztJQUM3RTtJQUVBLElBQUk7UUFDRix5Q0FBeUM7UUFDekMsSUFBSSxDQUFDeEQsUUFBUUMsR0FBRyxDQUFDQyxhQUFhLElBQUksQ0FBQ0YsUUFBUUMsR0FBRyxDQUFDSSxhQUFhLElBQUksQ0FBQ0wsUUFBUUMsR0FBRyxDQUFDTSxhQUFhLElBQUksQ0FBQ1AsUUFBUUMsR0FBRyxDQUFDd0QsY0FBYyxFQUFFO1lBQ3pILE1BQU0sSUFBSTlCLE1BQU07UUFDbEI7UUFFQSwyQ0FBMkM7UUFDM0MsTUFBTSxFQUFFK0IsU0FBUyxFQUFFQyxjQUFjLEVBQUVDLFFBQVEsRUFBRSxHQUFHVCxJQUFJVSxJQUFJO1FBRXhELElBQUksQ0FBQ0gsV0FBVztZQUNkLE9BQU9OLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBcUI7UUFDNUQ7UUFFQSxJQUFJLENBQUNHLGtCQUFrQixDQUFDQyxVQUFVO1lBQ2hDLE9BQU9SLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBc0M7UUFDN0U7UUFFQW5CLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDJCQUEyQixFQUFFb0IsVUFBVSxDQUFDO1FBRXJELHdDQUF3QztRQUN4QyxNQUFNSSxhQUFhLE1BQU1sRCxvQkFBb0I4QztRQUU3QyxJQUFJLENBQUNJLGNBQWNBLFdBQVc3QixNQUFNLEtBQUssR0FBRztZQUMxQyxNQUFNLElBQUlOLE1BQU07UUFDbEI7UUFFQSxpQ0FBaUM7UUFDakMsTUFBTW9DLFVBQVVMLFVBQVViLEtBQUssQ0FBQyxLQUFLQyxHQUFHLEdBQUdELEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJO1FBQzVELE1BQU1tQixXQUFXLENBQUMsTUFBTSxFQUFFeEQsaUJBQWlCb0QsVUFBVSxTQUFTLEVBQUVwRCxpQkFBaUJtRCxnQkFBZ0IsQ0FBQyxFQUFFTSxLQUFLQyxHQUFHLEdBQUcsQ0FBQyxFQUFFSCxRQUFRLENBQUM7UUFFM0gxQixRQUFRQyxHQUFHLENBQUMsQ0FBQywrQkFBK0IsRUFBRTBCLFNBQVMsQ0FBQztRQUV4RCwwQkFBMEI7UUFDMUIsTUFBTW5FLFNBQVNzRSxJQUFJLENBQ2pCLElBQUk3RSxnRUFBZ0JBLENBQUM7WUFDbkI4RSxRQUFRcEUsUUFBUUMsR0FBRyxDQUFDd0QsY0FBYztZQUNsQ1ksS0FBS0w7WUFDTE0sTUFBTVI7WUFDTlMsYUFBYTlCLHNCQUFzQmlCO1FBQ3JDO1FBR0ZyQixRQUFRQyxHQUFHLENBQUMsQ0FBQyxnQ0FBZ0MsRUFBRTBCLFNBQVMsQ0FBQztRQUV6RCwwQkFBMEI7UUFDMUIsTUFBTVEsY0FBY3hFLFFBQVFDLEdBQUcsQ0FBQ3dFLGdCQUFnQixHQUM1QyxDQUFDLFFBQVEsRUFBRXpFLFFBQVFDLEdBQUcsQ0FBQ3dFLGdCQUFnQixDQUFDLENBQUMsRUFBRVQsU0FBUyxDQUFDLEdBQ3JELENBQUMsWUFBWSxFQUFFaEUsUUFBUUMsR0FBRyxDQUFDQyxhQUFhLENBQUMsUUFBUSxFQUFFOEQsU0FBUyxDQUFDO1FBRWpFLHlCQUF5QjtRQUN6QixPQUFPWixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCbUIsU0FBUztZQUNUVjtZQUNBUTtZQUNBRyxVQUFVYixXQUFXN0IsTUFBTTtZQUMzQjJDLFlBQVksSUFBSVgsT0FBT1ksV0FBVztRQUNwQztJQUVGLEVBQUUsT0FBT3JCLE9BQU87UUFDZG5CLFFBQVFtQixLQUFLLENBQUMsMkJBQTJCQTtRQUV6QyxPQUFPSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCbUIsU0FBUztZQUNUbEIsT0FBT0EsTUFBTXNCLE9BQU8sSUFBSTtRQUMxQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcml2YXRlLy4vcGFnZXMvYXBpL3JldXBsb2FkLXZpZGVvLmpzP2MxZTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUzNDbGllbnQsIFB1dE9iamVjdENvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LXMzXCI7XG5pbXBvcnQgaHR0cHMgZnJvbSBcImh0dHBzXCI7XG5pbXBvcnQgaHR0cCBmcm9tIFwiaHR0cFwiO1xuaW1wb3J0IHsgVVJMIH0gZnJvbSBcInVybFwiO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBhcGk6IHtcbiAgICBib2R5UGFyc2VyOiB0cnVlLFxuICB9LFxufTtcblxuLy8gUzNDbGllbnQgeWFyYXRpc2hcbmNvbnN0IHMzQ2xpZW50ID0gbmV3IFMzQ2xpZW50KHtcbiAgcmVnaW9uOiBcImF1dG9cIixcbiAgZW5kcG9pbnQ6IGBodHRwczovLyR7cHJvY2Vzcy5lbnYuUjJfQUNDT1VOVF9JRH0ucjIuY2xvdWRmbGFyZXN0b3JhZ2UuY29tYCxcbiAgY3JlZGVudGlhbHM6IHtcbiAgICBhY2Nlc3NLZXlJZDogcHJvY2Vzcy5lbnYuUjJfQUNDRVNTX0tFWSxcbiAgICBzZWNyZXRBY2Nlc3NLZXk6IHByb2Nlc3MuZW52LlIyX1NFQ1JFVF9LRVksXG4gIH0sXG59KTtcblxuLy8gRmF5bCBub21pbmkgdG96YWxhc2ggZnVua3NpeWFzaVxuY29uc3Qgc2FuaXRpemVGaWxlTmFtZSA9IChzdHIpID0+IHtcbiAgaWYgKCFzdHIpIHJldHVybiBcInVua25vd25cIjtcbiAgcmV0dXJuIFN0cmluZyhzdHIpLnJlcGxhY2UoL1teYS16QS1aMC05Xy1dL2csIFwiXCIpO1xufTtcblxuLy8gVVJMIGRhbiBmYXlsbmkgeXVrbGFiIG9saXNoIGZ1bmtzaXlhc2lcbmNvbnN0IGRvd25sb2FkRmlsZUZyb21VcmwgPSAodXJsKSA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgcHJvdG9jb2wgPSB1cmwuc3RhcnRzV2l0aCgnaHR0cHMnKSA/IGh0dHBzIDogaHR0cDtcbiAgICBcbiAgICBjb25zdCByZXF1ZXN0ID0gcHJvdG9jb2wuZ2V0KHVybCwgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAvLyBSZWRpcmVjdCBibydsc2EsIHlhbmdpIFVSTCBnYSBvJ3Rpc2hcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlID09PSAzMDIgfHwgcmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMzAxKSB7XG4gICAgICAgIGRvd25sb2FkRmlsZUZyb21VcmwocmVzcG9uc2UuaGVhZGVycy5sb2NhdGlvbikudGhlbihyZXNvbHZlKS5jYXRjaChyZWplY3QpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlICE9PSAyMDApIHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgSFRUUCBTdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzQ29kZX1gKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2h1bmtzID0gW107XG4gICAgICBsZXQgdG90YWxTaXplID0gMDtcblxuICAgICAgcmVzcG9uc2Uub24oJ2RhdGEnLCAoY2h1bmspID0+IHtcbiAgICAgICAgY2h1bmtzLnB1c2goY2h1bmspO1xuICAgICAgICB0b3RhbFNpemUgKz0gY2h1bmsubGVuZ3RoO1xuICAgICAgfSk7XG5cbiAgICAgIHJlc3BvbnNlLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoY2h1bmtzKTtcbiAgICAgICAgY29uc29sZS5sb2coYOKchSBGYXlsIHl1a2xhYiBvbGluZGk6ICR7dG90YWxTaXplfSBieXRlc2ApO1xuICAgICAgICByZXNvbHZlKGJ1ZmZlcik7XG4gICAgICB9KTtcblxuICAgICAgcmVzcG9uc2Uub24oJ2Vycm9yJywgcmVqZWN0KTtcbiAgICB9KTtcblxuICAgIHJlcXVlc3Qub24oJ2Vycm9yJywgcmVqZWN0KTtcbiAgICBcbiAgICAvLyBUaW1lb3V0IHFvJ3NoaXNoICg1IGRhcWlxYSlcbiAgICByZXF1ZXN0LnNldFRpbWVvdXQoMzAwMDAwLCAoKSA9PiB7XG4gICAgICByZXF1ZXN0LmRlc3Ryb3koKTtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0Rvd25sb2FkIHRpbWVvdXQgKDUgZGFxaXFhKScpKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vLyBDb250ZW50LVR5cGUgbmkgVVJMIGRhbiBhbmlxbGFzaFxuY29uc3QgZ2V0Q29udGVudFR5cGVGcm9tVXJsID0gKHVybCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVybE9iaiA9IG5ldyBVUkwodXJsKTtcbiAgICBjb25zdCBleHQgPSB1cmxPYmoucGF0aG5hbWUuc3BsaXQoJy4nKS5wb3AoKS50b0xvd2VyQ2FzZSgpO1xuICAgIFxuICAgIGNvbnN0IGNvbnRlbnRUeXBlcyA9IHtcbiAgICAgICdtcDQnOiAndmlkZW8vbXA0JyxcbiAgICAgICd3ZWJtJzogJ3ZpZGVvL3dlYm0nLFxuICAgICAgJ2F2aSc6ICd2aWRlby94LW1zdmlkZW8nLFxuICAgICAgJ21vdic6ICd2aWRlby9xdWlja3RpbWUnLFxuICAgICAgJ21rdic6ICd2aWRlby94LW1hdHJvc2thJyxcbiAgICAgICdmbHYnOiAndmlkZW8veC1mbHYnLFxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIGNvbnRlbnRUeXBlc1tleHRdIHx8ICd2aWRlby9tcDQnO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuICd2aWRlby9tcDQnO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIC8vIEZhcWF0IFBPU1Qgc28ncm92bGFybmkgcWFidWwgcWlsaXNoXG4gIGlmIChyZXEubWV0aG9kICE9PSBcIlBPU1RcIikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiBcIkZhcWF0IFBPU1Qgc28ncm92bGFyIHFhYnVsIHFpbGluYWRpXCIgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIC8vIDHvuI/ig6MgTXVoaXQgbyd6Z2FydXZjaGlsYXJpbmkgdGVrc2hpcmlzaFxuICAgIGlmICghcHJvY2Vzcy5lbnYuUjJfQUNDT1VOVF9JRCB8fCAhcHJvY2Vzcy5lbnYuUjJfQUNDRVNTX0tFWSB8fCAhcHJvY2Vzcy5lbnYuUjJfU0VDUkVUX0tFWSB8fCAhcHJvY2Vzcy5lbnYuUjJfQlVDS0VUX05BTUUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlIyIHNvemxhbWFsYXJpIHRvJ2xpcSBlbWFzICguZW52IGZheWxuaSB0ZWtzaGlyaW5nKVwiKTtcbiAgICB9XG5cbiAgICAvLyAy77iP4oOjIFJlcXVlc3QgYm9keSBkYW4gbWEnbHVtb3RsYXJuaSBvbGlzaFxuICAgIGNvbnN0IHsgdmlkZW9fdXJsLCBlcGlzb2RlX251bWJlciwgYW5pbWVfaWQgfSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCF2aWRlb191cmwpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcInZpZGVvX3VybCBtYWpidXJpeVwiIH0pO1xuICAgIH1cblxuICAgIGlmICghZXBpc29kZV9udW1iZXIgfHwgIWFuaW1lX2lkKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJlcGlzb2RlX251bWJlciB2YSBhbmltZV9pZCBtYWpidXJpeVwiIH0pO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGDwn5OlIFZpZGVvIHl1a2xhYiBvbGlubW9xZGE6ICR7dmlkZW9fdXJsfWApO1xuXG4gICAgLy8gM++4j+KDoyBWaWRlbyBmYXlsbmkgVVJMIGRhbiB5dWtsYWIgb2xpc2hcbiAgICBjb25zdCBmaWxlQnVmZmVyID0gYXdhaXQgZG93bmxvYWRGaWxlRnJvbVVybCh2aWRlb191cmwpO1xuXG4gICAgaWYgKCFmaWxlQnVmZmVyIHx8IGZpbGVCdWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWaWRlbyB5dWtsYWIgb2xpbm1hZGkgeW9raSBmYXlsIGJvJ3NoXCIpO1xuICAgIH1cblxuICAgIC8vIDTvuI/ig6MgWWFuZ2kgZmF5bCBub21pbmkgeWFyYXRpc2hcbiAgICBjb25zdCBmaWxlRXh0ID0gdmlkZW9fdXJsLnNwbGl0KCcuJykucG9wKCkuc3BsaXQoJz8nKVswXSB8fCAnbXA0JztcbiAgICBjb25zdCBmaWxlTmFtZSA9IGBhbmltZV8ke3Nhbml0aXplRmlsZU5hbWUoYW5pbWVfaWQpfV9lcGlzb2RlXyR7c2FuaXRpemVGaWxlTmFtZShlcGlzb2RlX251bWJlcil9XyR7RGF0ZS5ub3coKX0uJHtmaWxlRXh0fWA7XG5cbiAgICBjb25zb2xlLmxvZyhg8J+TpCBSMiBnYSB5dWtsYXNoIGJvc2hsYW5tb3FkYTogJHtmaWxlTmFtZX1gKTtcblxuICAgIC8vIDXvuI/ig6MgUjIgZ2EgdXBsb2FkIHFpbGlzaFxuICAgIGF3YWl0IHMzQ2xpZW50LnNlbmQoXG4gICAgICBuZXcgUHV0T2JqZWN0Q29tbWFuZCh7XG4gICAgICAgIEJ1Y2tldDogcHJvY2Vzcy5lbnYuUjJfQlVDS0VUX05BTUUsXG4gICAgICAgIEtleTogZmlsZU5hbWUsXG4gICAgICAgIEJvZHk6IGZpbGVCdWZmZXIsXG4gICAgICAgIENvbnRlbnRUeXBlOiBnZXRDb250ZW50VHlwZUZyb21VcmwodmlkZW9fdXJsKSxcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIGNvbnNvbGUubG9nKGDinIUgUWF5dGEgeXVrbGFzaCBtdXZhZmZhcWl5YXRsaTogJHtmaWxlTmFtZX1gKTtcblxuICAgIC8vIDbvuI/ig6MgUHVibGljIFVSTCB5YXJhdGlzaFxuICAgIGNvbnN0IGRvd25sb2FkVXJsID0gcHJvY2Vzcy5lbnYuUjJfUFVCTElDX0RPTUFJTlxuICAgICAgPyBgaHR0cHM6Ly8ke3Byb2Nlc3MuZW52LlIyX1BVQkxJQ19ET01BSU59LyR7ZmlsZU5hbWV9YFxuICAgICAgOiBgaHR0cHM6Ly9wdWItJHtwcm9jZXNzLmVudi5SMl9BQ0NPVU5UX0lEfS5yMi5kZXYvJHtmaWxlTmFtZX1gO1xuXG4gICAgLy8gN++4j+KDoyBOYXRpamFuaSBxYXl0YXJpc2hcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGZpbGVOYW1lLFxuICAgICAgZG93bmxvYWRVcmwsXG4gICAgICBmaWxlU2l6ZTogZmlsZUJ1ZmZlci5sZW5ndGgsXG4gICAgICB1cGxvYWRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIFFheXRhIHl1a2xhc2ggeGF0b3NpOlwiLCBlcnJvcik7XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCBcIlFheXRhIHl1a2xhc2ggeGF0b3NpXCIsXG4gICAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiUzNDbGllbnQiLCJQdXRPYmplY3RDb21tYW5kIiwiaHR0cHMiLCJodHRwIiwiVVJMIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsInMzQ2xpZW50IiwicmVnaW9uIiwiZW5kcG9pbnQiLCJwcm9jZXNzIiwiZW52IiwiUjJfQUNDT1VOVF9JRCIsImNyZWRlbnRpYWxzIiwiYWNjZXNzS2V5SWQiLCJSMl9BQ0NFU1NfS0VZIiwic2VjcmV0QWNjZXNzS2V5IiwiUjJfU0VDUkVUX0tFWSIsInNhbml0aXplRmlsZU5hbWUiLCJzdHIiLCJTdHJpbmciLCJyZXBsYWNlIiwiZG93bmxvYWRGaWxlRnJvbVVybCIsInVybCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicHJvdG9jb2wiLCJzdGFydHNXaXRoIiwicmVxdWVzdCIsImdldCIsInJlc3BvbnNlIiwic3RhdHVzQ29kZSIsImhlYWRlcnMiLCJsb2NhdGlvbiIsInRoZW4iLCJjYXRjaCIsIkVycm9yIiwiY2h1bmtzIiwidG90YWxTaXplIiwib24iLCJjaHVuayIsInB1c2giLCJsZW5ndGgiLCJidWZmZXIiLCJCdWZmZXIiLCJjb25jYXQiLCJjb25zb2xlIiwibG9nIiwic2V0VGltZW91dCIsImRlc3Ryb3kiLCJnZXRDb250ZW50VHlwZUZyb21VcmwiLCJ1cmxPYmoiLCJleHQiLCJwYXRobmFtZSIsInNwbGl0IiwicG9wIiwidG9Mb3dlckNhc2UiLCJjb250ZW50VHlwZXMiLCJlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIlIyX0JVQ0tFVF9OQU1FIiwidmlkZW9fdXJsIiwiZXBpc29kZV9udW1iZXIiLCJhbmltZV9pZCIsImJvZHkiLCJmaWxlQnVmZmVyIiwiZmlsZUV4dCIsImZpbGVOYW1lIiwiRGF0ZSIsIm5vdyIsInNlbmQiLCJCdWNrZXQiLCJLZXkiLCJCb2R5IiwiQ29udGVudFR5cGUiLCJkb3dubG9hZFVybCIsIlIyX1BVQkxJQ19ET01BSU4iLCJzdWNjZXNzIiwiZmlsZVNpemUiLCJ1cGxvYWRlZEF0IiwidG9JU09TdHJpbmciLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/reupload-video.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Freupload-video&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Freupload-video.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();